0 error(s), 27 warning(s) unlisted in pass 1
                       ; 1
                      ; - processor 6809 ; 2
                      ; build-command java Blend zoo.asm z2.asm ; 3
                      ; build-command a09 z2.asm ; 4
                       ; 5
                      ; ------- To Do ----- ; 6
                      ; The CFLASH I/O routines ; 7
                       ; 8
                      ; ------- Future Enhancements ----- ; 9
                      ; When you enter a question, the game should strip off 
any trailing "?" ; 10
                      ; A show-zoo facility to show all nodes in the zoo would 
be handy ; 11
                       ; 12
                      ; ------- Lessons learned for book ------- ; 13
                       ; 14
                      ; Talk about inheritance and polymorphism and such with 
FILE_IO and ; 15
                      ; CFLASH_FILE_IO ; 16
                       ; 17
                      ; Unit testing is so very important. Lots of functions 
seem to work ; 18
                      ; except I didn't make sure the current-position was 
updated and  ; 19
                      ; I didn't make sure registers were preserved and 
un-needed returns ; 20
                      ; were correct (that I later came to use). Develop lots 
of little ; 21
                      ; scaffolding code that won't get used in production, 
but will get used ; 22
                      ; along the way. DON'T DELETE IT ... just comment it out 
or move it. You'll ; 23
                      ; test again later. ; 24
                       ; 25
                      ; Debug facilities like register-dump and memory view is 
vital. Develop ; 26
                      ; those for the reader. ; 27
                       ; 28
                      ; It would be nice if there were a tool-facility to 
manage stack variables ; 29
                      ; to keep track of things like "4,S" automatically. ; 30
                       ; 31
                      ; In making functions generic, you'll be stacking and 
unstacking a lot of things ; 32
                      ; needlessly to ensure nothing gets changed. The 
alternative is to force the ; 33
                      ; caller to preserve data across calls. This is equally 
viable and preferrable ; 34
                      ; in speed-critical situations. ; 35
                       ; 36
                      ; Good debug techniques: increment screen memory in and 
out of a function so you can ; 37
                      ; see the call tree. Also increment after steps in a 
suspect function. Or just uncomment  ; 38
                      ; lines of a function one by one ... especially the 
calls. ; 39
                      ; Substitue indirect calls temporarily with absolutes. ; 
40
                      ; Stress the importance of unit-testing a method or set 
of methods completely. Throw-away ; 41
                      ; debug code ... but just comment it out! You'll find 
later that you suspect a function ; 42
                      ; is failing even though you thought you tested it 
fully. Stick in the increment-while-true ; 43
                      ; to see if you are getting to a spot. Store values to 
the screen memory for inspection. ; 44
                       ; 45
                      ; With all the indexed addressing, the LEA is most 
needed. It's power becomes clear. ; 46
                      ; Talk about this instruction when you talk about 
indexed addressing. ; 47
                       ; 48
                      ; The LEA is used to add and subtract from the index 
registers even though it ; 49
                      ; doesn't look like a standard add/subtract. It takes 
longer too ... longer ; 50
                      ; instruction. ; 51
                      ; Comment that this is a LEA even though it doesn't look 
like one! ; 52
                       ; 53
                      ; When you first start working on a platform you'll 
spend a lot of time creating ; 54
                      ; librarys of things (strings, screen, etc) that will 
pay off in the future. ; 55
                      ; Don't worry if you find yourself straying from the 
course of your game ... remember ; 56
                      ; you are writing lots of future games too. ; 57
                       ; 58
                      ; Took a while to code this game because I created a lot 
of library ; 59
                      ; functions (strings, screen, etc) that will pay off in 
my next ; 60
                      ; application (show NavalWar, for instance) ; 61
                       ; 62
                      ; Observations: ; 63
                      ; Not a lot of local variables to work with in 
assembler. You have to either ; 64
                      ; frame-up the stack or create lots of these globals. ; 
65
                       ; 66
                      ; Talk about abstraction. We hid the screen-cursor 
behind functions. Advantages? ; 67
                      ; Disadvantages? We didn't hide the CurrentSize and 
CurrentPosition. They are more ; 68
                      ; concrete ... talk about this. ; 69
                       ; 70
                      ; Would be nice if the tool could figure out data 
context so we could drop '#' and ; 71
                      ; use '&' when we need to. ; 72
                       ; 73
                       ; 74
                       ; 75
                      ; Memory-Map ; 76
                      ; Stack builds down from 1000 ; 77
                      ; 1000 - 1FFF Code (RAM loaded) ; 78
                      ; 2000 - 2FFF Vars ; 79
                      ; 3000 - 7FFF RAM-Drive ; 80
                       ; 81
                      ;<EditorTab name="ZOO_NODE"> ; 82
                      ; StructureDefinition ZOO_NODE { ; 83
                      ;   2 DataOffset ; 84
                      ;   2 YesNextNode ; 85
                      ;   2 NoNextNode ; 86
                      ;   256 Text ; 87
                      ; } ; 88
                      ;</EditorTab> ; 89
                       ; 90
                      ;<EditorTab name="FILE_IO"> ; 91
                      ; StructureDefinition FILE_IO { ; 92
                      ;   2 FnReadBytes  ; X=this, Y=number, U=buffer ; 93
                      ;   2 FnWriteBytes ; X=this, Y=number, U=buffer ; 94
                      ;   2 FnFlush      ; X=this ; 95
                      ;   2 FnSeek       ; X=this, Y=position ; 96
                      ;   2 FnGetSize    ; X=this, Y<=size ; 97
                      ; -------- ; 98
                      ;   2 CurrentPosition ; 99
                      ;   2 CurrentSize ; 100
                      ; } ; 101
                       ; 102
                      ; StructureDefinition CFLASH_FILE_IO : FILE_IO { ; 103
                      ; Inheriting all of FILE_IO's members first ; 104
                      ;   2   StartSector ; 105
                      ;   2   CurrentOffsetInSector ; 106
                      ;   2   CurrentCachedSector ; 107
                      ;   1   Dirty ; 108
                      ;   512 SectorCache ; 109
                      ; } ; 110
                      ;</EditorTab> ; 111
                       ; 112
                      ;<EditorTab name="RAM"> ; 113
                       ; 114
                      ; BASIC scratch memory takes from $0000 to $0400 ; 115
                      ; Screen sits at $0400 - $04FF ; 116
                      ; Stack runs from $04FF - $1000 ; 117
                      ; Program lives from $1000 to $1FFF ; 118
                      ; Variable memory lives from $2000 to $2FFF ; 119
                      ; RAMDRIVE eats the remainder of RAM from $3000 on ; 120
                       ; 121
                        org $2000 ; 122
                      NODE_BUF_LAST    rmb  262 ; 123
                      NODE_BUF_CURRENT rmb  262 ; 124
                      NODE_BUF_NEW_1   rmb  262 ; 125
                      NODE_BUF_NEW_2   rmb  262 ; 126
                      ZOO_IO           rmb  533 ; 127
                      INPUT_BUFFER     rmb  16 ; 128
                      SCREEN_CURSOR    rmb  2 ; 129
                      TEMP_A           rmb  2 ; 130
                       ; 131
                        org $3000 ; 132
                      RAM_DRIVE        rmb  $1000 ; At least 4K left in a 16K 
system ; 133
                       ; 134
                      ;</EditorTab> ; 135
                       ; 136
                      ;<EditorTab name="START"> ; 137
                        org $1000 ; 138
                       ; 139
 1000 434F434F4F53      fcc "COCOOS" ; Preamble checked by the RAMLOADER. 
Execution begins at $1006. ; 140
                       ; 141
 1006 10CE1000          LDS #$1000
                       ; 143
 100A C660              LDB #96
 100C 17039B            LBSR CLEAR_SCREEN ;   CLEAR_SCREEN() ; 145
                       ; 146
                        ;X = #ZOO_IO ; 147
                        ;INIT_RAM_FILE() ; 148
                       ; 149
                        ; The RAMLOADER leaves the last-loaded-sector in Y ; 
150
 100F 3121              LEAY 1,Y           ; Assume the data area is right 
after the program ; 151
 1011 8E2418            LDX #ZOO_IO
 1014 17000F            LBSR INIT_CFLASH_FILE ;   INIT_CFLASH_FILE() ; 153
                         ; 154
 1017 8E1643            LDX #MSG_WELCOME
 101A 1703AE            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE() ; 156
                         ; 157
                      FLOW_A_1_OUTPUT_BEGIN:
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_1_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_1_1_INPUT:
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_1_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_1_OUTPUT_TRUE:
 101D 8E2418            LDX #ZOO_IO
 1020 170112            LBSR PLAY_ZOO ;     PLAY_ZOO() ; 160
 1023 16FFF7              LBRA  FLOW_A_1_OUTPUT_BEGIN
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-RedundantLabel-    FLOW_A_1_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_1_OUTPUT_END:
                       ; 162
                      ;</EditorTab> ; 163
                       ; 164
                      ;<EditorTab name="CFLASH FILE I/O"> ; 165
                      ;=========================================================
============== ; 166
                      ; CFLASH FILE IO FUNCTIONS ; 167
                      ;=========================================================
============== ; 168
                       ; 169
                      INIT_CFLASH_FILE: ; INIT_CFLASH_FILE() { ; X=this ; 170 
--SubroutineContextBegins--
                        ; StructureUsage X is CFLASH_FILE_IO ; 171
                       ; 172
 1026 10AF0E            STY 14,X
                        ; 174
 1029 CC1048            LDD #CFLASH_READ_BYTES
 102C ED84              STD 0,X
 102E CC1049            LDD #CFLASH_WRITE_BYTES
 1031 ED02              STD 2,X
 1033 CC104A            LDD #CFLASH_FLUSH
 1036 ED04              STD 4,X
 1038 CC104B            LDD #CFLASH_SEEK
 103B ED06              STD 6,X
 103D CC104C            LDD #CFLASH_GET_SIZE
 1040 ED08              STD 8,X
 1042 CC0000            LDD #0
 1045 ED0A              STD 10,X
                        ; Look for 00000000 as end marker ... make sure data 
area is all 0's to start   ; 187
                        ; X->CurrentSize = D   ; 188
                         ; 189
 1047 39                RTS ; } ; 190 --SubroutineContextEnds--
                       ; 191
                      CFLASH_READ_BYTES: ; CFLASH_READ_BYTES() { ; X=this, 
Y=number of bytes, U=destination, Y<=bytes read ; 192 --SubroutineContextBegins-
-
                        ; StructureUsage X is CFLASH_FILE_IO ; 193
 1048 39                RTS ; } ; 194 --SubroutineContextEnds--
                       ; 195
                      CFLASH_WRITE_BYTES: ; CFLASH_WRITE_BYTES() { ; X=this, 
Y=number of bytes, U=destination, Y<=bytes wrote ; 196 --SubroutineContextBegins
--
                        ; StructureUsage X is CFLASH_FILE_IO ; 197
 1049 39                RTS ; } ; 198 --SubroutineContextEnds--
                       ; 199
                      CFLASH_FLUSH: ; CFLASH_FLUSH() {   ; 200 
--SubroutineContextBegins--
                        ; 201
 104A 39                RTS ; } ; 202 --SubroutineContextEnds--
                       ; 203
                      CFLASH_SEEK: ; CFLASH_SEEK() { ; 204 --SubroutineContextBe
gins--
                        ; StructureUsage X is CFLASH_FILE_IO ; 205
 104B 39                RTS ; } ; 206 --SubroutineContextEnds--
                       ; 207
                      CFLASH_GET_SIZE: ; CFLASH_GET_SIZE() { ; 208 
--SubroutineContextBegins--
                        ; StructureUsage X is CFLASH_FILE_IO  ; 209
 104C 10AE0C            LDY 12,X
 104F 39                RTS ; } ; 211 --SubroutineContextEnds--
                       ; 212
                      ;</EditorTab> ; 213
                       ; 214
                      ;<EditorTab name="RAM FILE I/O"> ; 215
                      ;=========================================================
============== ; 216
                      ; RAM FILE IO FUNCTIONS ; 217
                      ;=========================================================
============== ; 218
                       ; 219
                      INIT_RAM_FILE: ; INIT_RAM_FILE() { ; X=this ; 220 
--SubroutineContextBegins--
                        ; StructureUsage X is FILE_IO ; 221
                       ; 222
 1050 3406              PSHS D ; 223
                       ; 224
 1052 3410              PSHS X ; 225
 1054 3420              PSHS Y ; 226
 1056 3440              PSHS U ; 227
                        ; Copy RAM_DRIVE from ROM to RAM ; 228
 1058 8E1733            LDX #RAM_DRIVE_ROM
 105B 108E3000          LDY #RAM_DRIVE
 105F CE0033            LDU #ZOO_END-RAM_DRIVE_ROM
                      ; CLEAN-RedundantLabel-    FLOW_A_2_OUTPUT_TRUE:
                      FLOW_A_2_OUTPUT_TRUE:
 1062 A680              LDA ,X+
 1064 A7A0              STA ,Y+
 1066 335F              LEAU -1,U
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_2_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_2_1_INPUT:
                      ; polarity 0
 1068 11830000          CMPU  #0
 106C 1026FFF2          LBNE FLOW_A_2_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_2_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_2_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_2_OUTPUT_END:
 1070 3540              PULS U ; 237
 1072 3520              PULS Y ; 238
 1074 3510              PULS X ; 239
                       ; 240
 1076 CC109C            LDD #RAM_READ_BYTES
 1079 ED84              STD 0,X
 107B CC10DD            LDD #RAM_WRITE_BYTES
 107E ED02              STD 2,X
 1080 CC1122            LDD #RAM_FLUSH
 1083 ED04              STD 4,X
 1085 CC1123            LDD #RAM_SEEK
 1088 ED06              STD 6,X
 108A CC1131            LDD #RAM_GET_SIZE
 108D ED08              STD 8,X
 108F CC0000            LDD #0
 1092 ED0A              STD 10,X
 1094 CC0033            LDD #ZOO_END-RAM_DRIVE_ROM
 1097 ED0C              STD 12,X
 1099 3506              PULS D ; 255
 109B 39                RTS ; } ; 256 --SubroutineContextEnds--
                       ; 257
                      RAM_READ_BYTES: ; RAM_READ_BYTES() { ; X=this, Y=number 
of bytes, U=destination, Y<=bytes read ; 258 --SubroutineContextBegins--
                        ; StructureUsage X is FILE_IO ; 259
                       ; 260
 109C 3406              PSHS D   ; 261
 109E 3420              PSHS Y ; 262
 10A0 3440              PSHS U ; 263
                       ; 264
 10A2 3410              PSHS X ; 265
                         ; 266
                        ; Limit Y to what we have ; 267
 10A4 EC0C              LDD 12,X
 10A6 A30A              SUBD 10,X ; 269
 10A8 ED64              STD 4,S     ; ?? Return value? ; 270
 10AA 1F20              TFR Y,D ; 271
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_3_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_3_1_INPUT:
                      ; polarity 1
 10AC 10A364            CMPD  4,S
 10AF 102F0002          LBLE FLOW_A_3_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_3_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_3_OUTPUT_TRUE:
 10B3 EC64              LDD 4,S
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_3_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_3_OUTPUT_END:
                      FLOW_A_3_OUTPUT_END:
 10B5 ED64              STD 4,S
 10B7 1F02              TFR D,Y   ; 276
                       ; 277
                        ; Get the absolute RAM pointer to X ; 278
 10B9 EC0A              LDD 10,X
 10BB C33000            ADDD #RAM_DRIVE ; 280
 10BE 1F01              TFR D,X ; 281
                       ; 282
                        ; Do the copy ; 283
                      ; CLEAN-RedundantLabel-    FLOW_A_4_OUTPUT_TRUE:
                      FLOW_A_4_OUTPUT_TRUE:
 10C0 A680              LDA ,X+
 10C2 A7C0              STA ,U+
 10C4 313F              LEAY -1,Y
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_4_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_4_1_INPUT:
                      ; polarity 0
 10C6 108C0000          CMPY  #0
 10CA 1026FFF2          LBNE FLOW_A_4_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_4_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_4_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_4_OUTPUT_END:
                         ; 289
 10CE EC64              LDD 4,S
                       ; 291
 10D0 3510              PULS X   ; 292
 10D2 E30A              ADDD 10,X ; 293
 10D4 ED0A              STD 10,X
                        ; 295
 10D6 3540              PULS U ; 296
 10D8 3520              PULS Y   ; 297
 10DA 3506              PULS D ; 298
                       ; 299
 10DC 39                RTS ; } ; 300 --SubroutineContextEnds--
                       ; 301
                      RAM_WRITE_BYTES: ; RAM_WRITE_BYTES() { ; X=this, 
Y=number of bytes, U=destination, Y<=bytes wrote ; 302 --SubroutineContextBegins
--
                        ; StructureUsage X is FILE_IO ; 303
                       ; 304
 10DD 3406              PSHS D ; 305
 10DF 3420              PSHS Y ; 306
 10E1 3440              PSHS U ; 307
 10E3 3410              PSHS X ; 308
                         ; 309
                        ; Get the absolute RAM pointer to X ; 310
 10E5 EC0A              LDD 10,X
 10E7 C33000            ADDD #RAM_DRIVE ; 312
 10EA 1F01              TFR D,X ; 313
                         ; 314
 10EC CC0000            LDD #0
 10EF ED62              STD 2,S
                       ; 317
                        ; Do the copy ; 318
                      ; CLEAN-RedundantLabel-    FLOW_A_5_OUTPUT_TRUE:
                      FLOW_A_5_OUTPUT_TRUE:
 10F1 A6C0              LDA ,U+
 10F3 A780              STA ,X+
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_6_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_6_1_INPUT:
                      ; polarity 1
 10F5 A11F              CMPA  -1,X
 10F7 10270003          LBEQ FLOW_A_6_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_6_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_6_OUTPUT_TRUE:
 10FB 16000C              LBRA  FLOW_A_5_OUTPUT_END ; break
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_6_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_6_OUTPUT_END:
                      FLOW_A_6_OUTPUT_END:
 10FE 6C62              INC 2,S
 1100 313F              LEAY -1,Y
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_5_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_5_1_INPUT:
                      ; polarity 0
 1102 108C0000          CMPY  #0
 1106 1026FFE7          LBNE FLOW_A_5_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_5_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_5_OUTPUT_END:
                      FLOW_A_5_OUTPUT_END:
                       ; 328
 110A 3510              PULS X ; 329
 110C EC62              LDD 2,S
 110E E30A              ADDD 10,X ; 331
 1110 ED0A              STD 10,X
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_7_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_7_1_INPUT:
                      ; polarity 1
 1112 10A30C            CMPD  12,X
 1115 102F0002          LBLE FLOW_A_7_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_7_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_7_OUTPUT_TRUE:
 1119 ED0C              STD 12,X
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_7_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_7_OUTPUT_END:
                      FLOW_A_7_OUTPUT_END:
 111B 3540              PULS U ; 336
 111D 3520              PULS Y  ; 337
 111F 3506              PULS D ; 338
                         ; 339
 1121 39                RTS ; } ; 340 --SubroutineContextEnds--
                       ; 341
                      RAM_FLUSH: ; RAM_FLUSH() {   ; 342 --SubroutineContextBegi
ns--
                        ; Nothing to do for RAM files   ; 343
 1122 39                RTS ; } ; 344 --SubroutineContextEnds--
                       ; 345
                      RAM_SEEK: ; RAM_SEEK() { ; 346 --SubroutineContextBegins--

                        ; StructureUsage X is FILE_IO ; 347
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_8_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_8_1_INPUT:
                      ; polarity 1
 1123 10AC0C            CMPY  12,X
 1126 102F0003          LBLE FLOW_A_8_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_8_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_8_OUTPUT_TRUE:
 112A 10AE0C            LDY 12,X
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_8_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_8_OUTPUT_END:
                      FLOW_A_8_OUTPUT_END:
 112D 10AF0A            STY 10,X
 1130 39                RTS ; } ; 352 --SubroutineContextEnds--
                       ; 353
                      RAM_GET_SIZE: ; RAM_GET_SIZE() { ; 354 
--SubroutineContextBegins--
                        ; StructureUsage X is FILE_IO ; 355
 1131 10AE0C            LDY 12,X
 1134 39                RTS ; } ; 357 --SubroutineContextEnds--
                      ;</EditorTab> ; 358
                       ; 359
                      ;<EditorTab name="PlayZoo()"> ; 360
                       ; 361
                      PLAY_ZOO: ; PLAY_ZOO() { ; X=FILE_IO ; 362 
--SubroutineContextBegins--
                       ; 363
 1135 108E0008          LDY #8
                       ; 365
 1139 3410              PSHS X ; 366
 113B 8E165E            LDX #MSG_INSTRUCTIONS
 113E 17028A            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE() ; 368
 1141 3510              PULS X ; 369
                       ; 370
                      FLOW_A_9_OUTPUT_BEGIN:
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_9_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_9_1_INPUT:
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_9_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_9_OUTPUT_TRUE:
                       ; 372
 1143 17020D            LBSR LOAD_ZOO_NODE ;     LOAD_ZOO_NODE() ; 373
                       ; 374
 1146 CE2106            LDU #NODE_BUF_CURRENT
                          ; StructureUsage U is ZOO_NODE ; 376
 1149 EC42              LDD 2,U
                       ; 378
                      ; polarity 1
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_10_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_10_1_INPUT:
                      ; polarity 0
 114B 10830000          CMPD  #0
 114F 10270045          LBEQ FLOW_A_10_OUTPUT_TRUE
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_10_OUTPUT_FALSE
                      ; CLEAN-UnreferencedLabel- FLOW_A_10_OUTPUT_FALSE:
                            // Question node ; 415
 1153 3410                      PSHS X            ; 416
                       ; 417
 1155 3046                      LEAX  6,U   ; 418
 1157 170271            LBSR PRINT_MESSAGE ;    PRINT_MESSAGE()          ; 419
                       ; 420
 115A 8E162A            LDX #MSG_QUESTION_MARK
 115D 17026B            LBSR PRINT_MESSAGE ;    PRINT_MESSAGE() ; 422
                       ; 423
 1160 8E1618            LDX #MSG_YN
 1163 170265            LBSR PRINT_MESSAGE ;    PRINT_MESSAGE() ; 425
                               ; 426
 1166 3440                      PSHS U           ; 427
 1168 8E262D            LDX #INPUT_BUFFER
 116B CE0004            LDU #4
 116E 170329            LBSR INPUT_STRING ;     INPUT_STRING() ; 430
 1171 1702A5            LBSR LINE_FEED ;           LINE_FEED() ; 431
 1174 3540                      PULS U         ; 432
                       ; 433
 1176 A684              LDA ,X
                      ; polarity 1
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_13_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_13_1_INPUT:
                      ; polarity 0
 1178 8159              CMPA  #'Y'
 117A 1027000F          LBEQ FLOW_A_13_OUTPUT_TRUE
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_13_OUTPUT_FALSE
                      ; CLEAN-UnreferencedLabel- FLOW_A_13_OUTPUT_FALSE:
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_14_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_14_1_INPUT:
                      ; polarity 1
 117E 814E              CMPA  #'N'
 1180 10260006          LBNE FLOW_A_14_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_14_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_14_OUTPUT_TRUE:
 1184 1701FA            LBSR COPY_CURRENT_TO_LAST ;             
COPY_CURRENT_TO_LAST() ; 439
 1187 10AE44            LDY 4,U
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_14_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_14_OUTPUT_END:
                      FLOW_A_14_OUTPUT_END:
 118A 160006              LBRA  FLOW_A_13_OUTPUT_END
                      FLOW_A_13_OUTPUT_TRUE:
 118D 1701F1            LBSR COPY_CURRENT_TO_LAST ;             
COPY_CURRENT_TO_LAST() ; 436
 1190 10AE42            LDY 2,U
                      FLOW_A_13_OUTPUT_END:
                       ; 442
 1193 3510                      PULS  X ; 443
 1195 16FFAB            LBRA  FLOW_A_9_OUTPUT_BEGIN ; CLEAN-JumpToJump     
LBRA  FLOW_A_10_OUTPUT_END
*** warning 1: Long branch within short branch range could be optimized
                      FLOW_A_10_OUTPUT_TRUE:
                            // Animal node ; 380
 1198 3410                      PSHS X ; 381
                                                 ; 382
 119A 8E162D            LDX #MSG_ISIT
 119D 17022B            LBSR PRINT_MESSAGE ;    PRINT_MESSAGE()           ; 
384
 11A0 3046                      LEAX  6,U        ; 385
 11A2 170226            LBSR PRINT_MESSAGE ;    PRINT_MESSAGE() ; 386
 11A5 8E162A            LDX #MSG_QUESTION_MARK
 11A8 170220            LBSR PRINT_MESSAGE ;    PRINT_MESSAGE() ; 388
                                 ; 389
 11AB 8E1618            LDX #MSG_YN
 11AE 17021A            LBSR PRINT_MESSAGE ;    PRINT_MESSAGE() ; 391
                               ; 392
 11B1 3440                      PSHS U           ; 393
 11B3 8E262D            LDX #INPUT_BUFFER
 11B6 CE0003            LDU #3
 11B9 1702DE            LBSR INPUT_STRING ;     INPUT_STRING() ; 396
 11BC 17025A            LBSR LINE_FEED ;           LINE_FEED() ; 397
 11BF 3540                      PULS U           ; 398
                       ; 399
 11C1 A684              LDA ,X
                      ; polarity 1
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_11_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_11_1_INPUT:
                      ; polarity 0
 11C3 8159              CMPA  #'Y'
 11C5 1027000F          LBEQ FLOW_A_11_OUTPUT_TRUE
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_11_OUTPUT_FALSE
                      ; CLEAN-UnreferencedLabel- FLOW_A_11_OUTPUT_FALSE:
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_12_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_12_1_INPUT:
                      ; polarity 1
 11C9 814E              CMPA  #'N'
 11CB 10260006          LBNE FLOW_A_12_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_12_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_12_OUTPUT_TRUE:
 11CF 3510                        PULS X ; 407
 11D1 1700A1            LBSR ADD_TO_ZOO ;         ADD_TO_ZOO() ; 408
 11D4 39                RTS ;             return ; 409
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_12_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_12_OUTPUT_END:
                      FLOW_A_12_OUTPUT_END:
 11D5 160009              LBRA  FLOW_A_11_OUTPUT_END
                      FLOW_A_11_OUTPUT_TRUE:
 11D8 8E1636            LDX #MSG_I_GOT_IT
 11DB 1701ED            LBSR PRINT_MESSAGE ;             PRINT_MESSAGE()   ; 
403
 11DE 3510                        PULS X          ; 404
 11E0 39                RTS ;             return ; 405
                      FLOW_A_11_OUTPUT_END:
                       ; 411
 11E1 3510                      PULS X ; 412
                       ; 413
                      ; CLEAN-UnreferencedLabel- FLOW_A_10_OUTPUT_END:
                       ; 445
 11E3 16FF5D              LBRA  FLOW_A_9_OUTPUT_BEGIN
                      ; CLEAN-RedundantLabel-    FLOW_A_9_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_9_OUTPUT_END:
                       ; 447
                      ; CLEAN-OrphanReturn-      RTS ; } ; 448 
--SubroutineContextEnds--
                      ;</EditorTab> ; 449
                       ; 450
                      ;<EditorTab name="AddToZoo()"> ; 451
                      ZOO_GATHER_INFO: ; ZOO_GATHER_INFO() { ; 452 
--SubroutineContextBegins--
                       ; 453
                      ; This function gathers all the data about the user's 
new animal: ; 454
                      ; NODE_BUF_NEW_1 <= the new question (0's for links) ; 
455
                      ; NODE_BUF_NEW_2 <= the new animal (0's for links) ; 456
                      ; TEMP_A <= the user's answer character ('Y' or 'N') ; 
457
                       ; 458
 11E6 3406              PSHS D ; 459
 11E8 3410              PSHS X ; 460
 11EA 3420              PSHS Y ; 461
 11EC 3440              PSHS U ; 462
                       ; 463
 11EE C660              LDB  #96 ; 464
 11F0 1701B7            LBSR CLEAR_SCREEN ;   CLEAR_SCREEN() ; 465
                         ; 466
 11F3 8E15CA            LDX #MSG_STUMP
 11F6 1701D2            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE() ; 468
                       ; 469
 11F9 CE2312            LDU #NODE_BUF_NEW_2
 11FC CC0000            LDD #0
 11FF EDC4              STD 0,U
 1201 ED42              STD 2,U
 1203 ED44              STD 4,U
 1205 3046              LEAX 6,U ; 475
 1207 CE0020            LDU #32
 120A 17028D            LBSR INPUT_STRING ;   INPUT_STRING() ; 477
 120D 170209            LBSR LINE_FEED ;   LINE_FEED() ; 478
                       ; 479
 1210 8E168F            LDX #MSG_GIVE
 1213 1701B5            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE() ; 481
 1216 C628              LDB #'('
 1218 1701CA            LBSR PRINT_CHARACTER ;   PRINT_CHARACTER() ; 483
 121B CE2106            LDU #NODE_BUF_CURRENT
 121E 3046              LEAX 6,U ; 485
 1220 1701A8            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE() ; 486
 1223 8E16CA            LDX #MSG_FROM
 1226 1701A2            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE() ; 488
 1229 CE2312            LDU #NODE_BUF_NEW_2
 122C 3046              LEAX 6,U ; 490
 122E 17019A            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE() ; 491
 1231 C629              LDB #')'
 1233 1701AF            LBSR PRINT_CHARACTER ;   PRINT_CHARACTER() ; 493
 1236 C63A              LDB #':'
 1238 1701AA            LBSR PRINT_CHARACTER ;   PRINT_CHARACTER() ; 495
 123B 1701DB            LBSR LINE_FEED ;   LINE_FEED() ; 496
                       ; 497
 123E CE220C            LDU #NODE_BUF_NEW_1
 1241 CC0000            LDD #0
 1244 EDC4              STD 0,U
 1246 ED42              STD 2,U
 1248 ED44              STD 4,U
 124A 3046              LEAX 6,U ; 503
 124C CE0100            LDU #256
 124F 170248            LBSR INPUT_STRING ;   INPUT_STRING() ; 505
 1252 1701C4            LBSR LINE_FEED ;   LINE_FEED() ; 506
                       ; 507
 1255 8E16D1            LDX #MSG_WHAT
 1258 170170            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE(); ; 509
                       ; 510
 125B 8E262D            LDX #INPUT_BUFFER
 125E CE0004            LDU #4
 1261 170236            LBSR INPUT_STRING ;   INPUT_STRING() ; 513
 1264 1701B2            LBSR LINE_FEED ;   LINE_FEED() ; 514
                       ; 515
                        ; Hang on to answer for a bit ; 516
 1267 A684              LDA ,X
 1269 B7263F            STA TEMP_A
                       ; 519
 126C 3540              PULS U ; 520
 126E 3520              PULS Y ; 521
 1270 3510              PULS X ; 522
 1272 3506              PULS D ; 523
                       ; 524
 1274 39                RTS ; } ; 525 --SubroutineContextEnds--
                       ; 526
                      ADD_TO_ZOO: ; ADD_TO_ZOO() { ; 527 --SubroutineContextBegi
ns--
                       ; 528
 1275 3406              PSHS D   ; 529
 1277 3410              PSHS X ; 530
 1279 3420              PSHS Y ; 531
 127B 3440              PSHS U ; 532
                       ; 533
 127D 3410              PSHS X ; StructureUsage X is FILE_IO ; 534
                       ; 535
 127F 17FF64            LBSR ZOO_GATHER_INFO ;   ZOO_GATHER_INFO()   ; 536
                       ; 537
                        ; Now we have collected all the information. ; 538
                        ; Build the new question node and new animal node. ; 
539
                         ; 540
                        ; The NEW_1 contains the question. For now we'll set ; 
541
                        ; the YES link to the new animal and the NO link ; 542
                        ; to the last guess (CURRENT) ; 543
                       ; 544
 1282 CE220C            LDU #NODE_BUF_NEW_1
 1285 3046              LEAX 6,U ; 546
 1287 170321            LBSR STRLEN ;   STRLEN() ; 547
                       ; 548
 128A C30005            ADDD #5 ; 549
 128D AEE4              LDX ,S
 128F E30C              ADDD 12,X ; 551
 1291 ED42              STD 2,U
 1293 108E2106          LDY #NODE_BUF_CURRENT
 1297 ECA4              LDD 0,Y
 1299 ED44              STD 4,U
                       ; 556
                        ; If the user's answer is not "YES" for the new 
animal, swap ; 557
                        ; the Yes/No links ; 558
                       ; 559
 129B B6263F            LDA TEMP_A
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_15_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_15_1_INPUT:
                      ; polarity 1
 129E 8159              CMPA  #'Y'
 12A0 10270008          LBEQ FLOW_A_15_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_15_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_15_OUTPUT_TRUE:
 12A4 EC42              LDD 2,U
 12A6 AE44              LDX 4,U
 12A8 AF42              STX 2,U
 12AA ED44              STD 4,U
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_15_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_15_OUTPUT_END:
                      FLOW_A_15_OUTPUT_END:
                           ; 567
 12AC 3510              PULS X ; Restoring the FILE_IO ; 568
                       ; 569
                        ; Append question node to end of zoo ; 570
 12AE CE220C            LDU #NODE_BUF_NEW_1
 12B1 170058            LBSR APPEND_NODE ;   APPEND_NODE()  ; 572
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_16_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_16_1_INPUT:
                      ; polarity 1
 12B4 C100              CMPB  #0
 12B6 1026000C          LBNE FLOW_A_16_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_16_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_16_OUTPUT_TRUE:
 12BA 17008B            LBSR OUT_OF_DISK_SPACE ;     OUT_OF_DISK_SPACE() ; 574
 12BD 3540                PULS U ; 575
 12BF 3520                PULS Y ; 576
 12C1 3510                PULS X ; 577
 12C3 3506                PULS D   ; 578
 12C5 39                RTS ;     return ; 579
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_16_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_16_OUTPUT_END:
                      FLOW_A_16_OUTPUT_END:
                       ; 581
                        ; Append new animal node to end of zoo ; 582
 12C6 CE2312            LDU #NODE_BUF_NEW_2
 12C9 170040            LBSR APPEND_NODE ;   APPEND_NODE()  ; 584
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_17_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_17_1_INPUT:
                      ; polarity 1
 12CC C100              CMPB  #0
 12CE 1026000C          LBNE FLOW_A_17_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_17_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_17_OUTPUT_TRUE:
 12D2 170073            LBSR OUT_OF_DISK_SPACE ;     OUT_OF_DISK_SPACE() ; 586
 12D5 3540                PULS U ; 587
 12D7 3520                PULS Y ; 588
 12D9 3510                PULS X ; 589
 12DB 3506                PULS D   ; 590
 12DD 39                RTS ;     return ; 591
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_17_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_17_OUTPUT_END:
                      FLOW_A_17_OUTPUT_END:
                       ; 593
                        ; At this point the nodes were added successfully. ; 
594
                        ; We need to change the link in the last question 
(LAST) to ; 595
                        ; point to the new question. ; 596
                       ; 597
 12DE CE2106            LDU #NODE_BUF_CURRENT
 12E1 ECC4              LDD 0,U
 12E3 CE2000            LDU #NODE_BUF_LAST
 12E6 10AEC4            LDY 0,U
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_18_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_18_1_INPUT:
                      ; polarity 1
 12E9 10A342            CMPD  2,U
 12EC 10270002          LBEQ FLOW_A_18_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_18_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_18_OUTPUT_TRUE:
 12F0 3122                LEAY 2,Y     ; 603
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_18_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_18_OUTPUT_END:
                      FLOW_A_18_OUTPUT_END:
                       ; 605
                        ; Y points to the data offset of the link to change ; 
606
 12F2 AD9806            JSR [6,X] ; 607
                       ; 608
 12F5 CE220C            LDU #NODE_BUF_NEW_1
 12F8 33C4              LEAU 0,U ; 610
 12FA ECC4              LDD ,U
 12FC 108E0002          LDY #2
 1300 AD9802            JSR [2,X] ; 613
                       ; 614
 1303 3540              PULS U ; 615
 1305 3520              PULS Y ; 616
 1307 3510              PULS X ; 617
 1309 3506              PULS D   ; 618
                         ; 619
 130B 39                RTS ; }  ; 620 --SubroutineContextEnds--
                       ; 621
                      APPEND_NODE: ; APPEND_NODE() { ; X=FILE_IO, U=ZOO_NODE, 
B<=0 if out-of-space, or 1 if OK ; 622 --SubroutineContextBegins--
 130C 3402              PSHS A ; 623
 130E 3420              PSHS Y ; 624
 1310 3440              PSHS U ; 625
                        ; StructureUsage U is ZOO_NODE ; 626
                        ; StructureUsage X is FILE_IO ; 627
 1312 10AE0C            LDY 12,X
 1315 10AFC4            STY 0,U
 1318 AD9806            JSR  [6,X]   ; 630
 131B 3410              PSHS X ; 631
 131D 3046              LEAX 6,U ; 632
 131F 170289            LBSR STRLEN ;   STRLEN() ; 633
 1322 3510              PULS X ; 634
 1324 C30005            ADDD #5 ; 635
 1327 1F02              TFR D,Y ; 636
 1329 3342              LEAU 2,U   ; 637
 132B AD9802            JSR [2,X] ; 638
 132E 3420              PSHS Y ; 639
 1330 A3E1              SUBD ,S++ ; 640
                      ; polarity 1
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_19_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_19_1_INPUT:
                      ; polarity 0
 1332 10830000          CMPD  #0
 1336 10260005          LBNE FLOW_A_19_OUTPUT_TRUE
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_19_OUTPUT_FALSE
                      ; CLEAN-UnreferencedLabel- FLOW_A_19_OUTPUT_FALSE:
 133A C601              LDB #1
 133C 160002              LBRA  FLOW_A_19_OUTPUT_END
                      FLOW_A_19_OUTPUT_TRUE:
 133F C600              LDB #0
                      FLOW_A_19_OUTPUT_END:
 1341 3540              PULS U ; 646
 1343 3520              PULS Y ; 647
 1345 3502              PULS A ; 648
 1347 39                RTS ; } ; 649 --SubroutineContextEnds--
                       ; 650
                      OUT_OF_DISK_SPACE: ; OUT_OF_DISK_SPACE() { ; 651 
--SubroutineContextBegins--
 1348 3410              PSHS X ; 652
 134A 8E1702            LDX #MSG_OUT_OF_SPACE
 134D 17007B            LBSR PRINT_MESSAGE ;   PRINT_MESSAGE() ; 654
 1350 3510              PULS X ; 655
 1352 39                RTS ; } ; 656 --SubroutineContextEnds--
                       ; 657
                      ;</EditorTab> ; 658
                       ; 659
                      ;<EditorTab name="Zoo Functions"> ; 660
                      ;=========================================================
============== ; 661
                      ; ZOO DATABASE FUNCTIONS ; 662
                      ;=========================================================
============== ; 663
                       ; 664
                      LOAD_ZOO_NODE: ; LOAD_ZOO_NODE() { ; X=FILE_IO, 
Y=NodeOffset ; 665 --SubroutineContextBegins--
                        ; StructureUsage X is FILE_IO  ; 666
 1353 3406              PSHS D ; 667
 1355 3420              PSHS Y ; 668
 1357 3440              PSHS U   ; 669
 1359 CE2106            LDU #NODE_BUF_CURRENT
 135C 10AFC4            STY 0,U
 135F AD9806            JSR [6,X]   ; 672
 1362 3342              LEAU 2,U ; 673
 1364 108E0004          LDY #4
 1368 AD94              JSR [0,X] ; 675
 136A 3344              LEAU 4,U ; 676
 136C 108E0001          LDY #1
                      ; CLEAN-RedundantLabel-    FLOW_A_20_OUTPUT_TRUE:
                      FLOW_A_20_OUTPUT_TRUE:
 1370 AD94                JSR [0,X] ; 679
 1372 A6C0              LDA ,U+
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_20_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_20_1_INPUT:
                      ; polarity 0
 1374 8100              CMPA  #0
 1376 1026FFF6          LBNE FLOW_A_20_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_20_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_20_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_20_OUTPUT_END:
                       ; 682
 137A 3540              PULS U ; 683
 137C 3520              PULS Y ; 684
 137E 3506              PULS D ; 685
 1380 39                RTS ; } ; 686 --SubroutineContextEnds--
                       ; 687
                      COPY_CURRENT_TO_LAST: ; COPY_CURRENT_TO_LAST() { ; 688 
--SubroutineContextBegins--
 1381 3402               PSHS A ; 689
 1383 3410               PSHS X ; 690
 1385 3420               PSHS Y ; 691
 1387 3440               PSHS U ; 692
 1389 8E2106            LDX #NODE_BUF_CURRENT
 138C CE2000            LDU #NODE_BUF_LAST
 138F 108E0106          LDY #262
                      ; CLEAN-RedundantLabel-    FLOW_A_21_OUTPUT_TRUE:
                      FLOW_A_21_OUTPUT_TRUE:
 1393 A680              LDA ,X+
 1395 A7C0              STA ,U+
 1397 313F              LEAY -1,Y
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_21_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_21_1_INPUT:
                      ; polarity 0
 1399 108C0000          CMPY  #0
 139D 1026FFF2          LBNE FLOW_A_21_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_21_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_21_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_21_OUTPUT_END:
 13A1 3540               PULS U ; 701
 13A3 3520               PULS Y ; 702
 13A5 3510               PULS X ; 703
 13A7 3502               PULS A ; 704
 13A9 39                RTS ; } ; 705 --SubroutineContextEnds--
                       ; 706
                      ;DUMP_ZOO() { ; X=start, Y=num bytes ; 707
                      ;   U = #$400 ; 708
                      ;   do { ; 709
                      ;    A = ,X+ ; 710
                      ;    ,U+ = A ; 711
                      ;    --Y ; 712
                      ;   } while(Y!=0); ; 713
                      ;} ; 714
                       ; 715
                      ;</EditorTab> ; 716
                       ; 717
                      ;<EditorTab name="Screen Functions"> ; 718
                       ; 719
                      CLEAR_SCREEN: ; CLEAR_SCREEN() { ; B = fill ; 720 
--SubroutineContextBegins--
 13AA 3410              PSHS X ; 721
 13AC 8E0400            LDX #$400
 13AF BF263D            STX SCREEN_CURSOR
                      FLOW_A_22_OUTPUT_BEGIN:
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_22_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_22_1_INPUT:
                      ; polarity 1
 13B2 8C0600            CMPX  #$600
 13B5 10270005          LBEQ FLOW_A_22_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_22_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_22_OUTPUT_TRUE:
 13B9 E780              STB ,X+
 13BB 16FFF4              LBRA  FLOW_A_22_OUTPUT_BEGIN
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-RedundantLabel-    FLOW_A_22_OUTPUT_END:
                      FLOW_A_22_OUTPUT_END:
 13BE 3510              PULS X ; 727
 13C0 39                RTS ; } ; 728 --SubroutineContextEnds--
                       ; 729
                      SET_SCREEN_CURSOR: ; SET_SCREEN_CURSOR() { ; Y = 
ScreenCoordinate ; 730 --SubroutineContextBegins--
 13C1 10BF263D          STY SCREEN_CURSOR
 13C5 39                RTS ; } ; 732 --SubroutineContextEnds--
                      GET_SCREEN_CURSOR: ; GET_SCREEN_CURSOR() { ; Y<= 
ScreenCoordinate ; 733 --SubroutineContextBegins--
 13C6 10BE263D          LDY SCREEN_CURSOR
 13CA 39                RTS ; } ; 735 --SubroutineContextEnds--
                       ; 736
                      PRINT_MESSAGE: ; PRINT_MESSAGE() { ; X=Message ; 737 
--SubroutineContextBegins--
 13CB 3404              PSHS  B ; 738
 13CD 3410              PSHS  X ; 739
                       ; 740
                      FLOW_A_23_OUTPUT_BEGIN:
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_23_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_23_1_INPUT:
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_23_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_23_OUTPUT_TRUE:
 13CF E680              LDB ,X+
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_24_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_24_1_INPUT:
                      ; polarity 1
 13D1 C100              CMPB  #0
 13D3 10260003          LBNE FLOW_A_24_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_24_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_24_OUTPUT_TRUE:
 13D7 160006              LBRA  FLOW_A_23_OUTPUT_END ; break
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_24_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_24_OUTPUT_END:
                      FLOW_A_24_OUTPUT_END:
 13DA 170008            LBSR PRINT_CHARACTER ;     PRINT_CHARACTER() ; 746
 13DD 16FFEF              LBRA  FLOW_A_23_OUTPUT_BEGIN
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-RedundantLabel-    FLOW_A_23_OUTPUT_END:
                      FLOW_A_23_OUTPUT_END:
                       ; 748
 13E0 3510              PULS  X ; 749
 13E2 3504              PULS  B ; 750
 13E4 39                RTS ; } ; 751 --SubroutineContextEnds--
                       ; 752
                      PRINT_CHARACTER: ; PRINT_CHARACTER() { ; B = character ; 
753 --SubroutineContextBegins--
 13E5 3406              PSHS D ; 754
 13E7 3440              PSHS U ; 755
 13E9 3420              PSHS Y ; 756
                       ; 757
                      ; polarity 1
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_25_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_25_1_INPUT:
                      ; polarity 0
 13EB C10D              CMPB  #13
 13ED 1027001E          LBEQ FLOW_A_25_OUTPUT_TRUE
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_25_OUTPUT_FALSE
                      ; CLEAN-UnreferencedLabel- FLOW_A_25_OUTPUT_FALSE:
 13F1 CE1514              LDU  #ASCIITRANS ; 761
 13F4 E6C5                LDB  B,U ; 762
 13F6 17FFCD            LBSR GET_SCREEN_CURSOR ;     GET_SCREEN_CURSOR() ; 763
*** warning 1: Long branch within short branch range could be optimized
 13F9 E7A0                STB  ,Y+ ; 764
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_26_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_26_1_INPUT:
                      ; polarity 1
 13FB 108C0600          CMPY  #$600
 13FF 102D0006          LBLT FLOW_A_26_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_26_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_26_OUTPUT_TRUE:
 1403 170071            LBSR SCROLL ;       SCROLL() ; 766
 1406 31A8E0                LEAY -32,Y   ; 767
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_26_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_26_OUTPUT_END:
                      FLOW_A_26_OUTPUT_END:
 1409 17FFB5            LBSR SET_ScREEN_CURSOR ;     SET_ScREEN_CURSOR() ; 769
*** warning 1: Long branch within short branch range could be optimized
 140C 160003              LBRA  FLOW_A_25_OUTPUT_END
                      FLOW_A_25_OUTPUT_TRUE:
 140F 170007            LBSR LINE_FEED ;     LINE_FEED() ; 759
                      FLOW_A_25_OUTPUT_END:
                       ; 771
 1412 3520              PULS Y ; 772
 1414 3540              PULS U ; 773
 1416 3506              PULS D ; 774
 1418 39                RTS ; } ; 775 --SubroutineContextEnds--
                       ; 776
                      LINE_FEED: ; LINE_FEED() { ; Y=ScreenCoordinate to 
adjust ; 777 --SubroutineContextBegins--
 1419 3406              PSHS  D ; 778
 141B 3420              PSHS  Y ; 779
 141D 17FFA6            LBSR GET_SCREEN_CURSOR ;   GET_SCREEN_CURSOR() ; 780
*** warning 1: Long branch within short branch range could be optimized
 1420 1F20              TFR   Y,D ; 781
 1422 1F98              TFR   B,A   ; 782
 1424 841F              ANDA  #31 ; 783
 1426 C620              LDB   #' ' ; 784
                      ; CLEAN-RedundantLabel-    FLOW_A_27_OUTPUT_TRUE:
                      FLOW_A_27_OUTPUT_TRUE:
 1428 17FFBA            LBSR PRINT_CHARACTER ;     PRINT_CHARACTER()  ; 786
*** warning 1: Long branch within short branch range could be optimized
 142B 4C                  INCA ; 787
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_27_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_27_1_INPUT:
                      ; polarity 0
 142C 8120              CMPA  #32
 142E 1026FFF6          LBNE FLOW_A_27_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_27_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_27_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_27_OUTPUT_END:
 1432 3520              PULS  Y ; 789
 1434 3506              PULS  D ; 790
 1436 39                RTS ; } ; 791 --SubroutineContextEnds--
                       ; 792
                      PRINT_HEX_DIGIT: ; PRINT_HEX_DIGIT() { ; B = value  ; 
793 --SubroutineContextBegins--
 1437 3404              PSHS B   ; 794
                      ; polarity 1
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_28_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_28_1_INPUT:
                      ; polarity 0
 1439 C10A              CMPB  #10
 143B 102D0007          LBLT FLOW_A_28_OUTPUT_TRUE
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_28_OUTPUT_FALSE
                      ; CLEAN-UnreferencedLabel- FLOW_A_28_OUTPUT_FALSE:
 143F C00A                SUBB  #10 ; 798
 1441 CB41                ADDB  #'A' ; 799
 1443 160002              LBRA  FLOW_A_28_OUTPUT_END
                      FLOW_A_28_OUTPUT_TRUE:
 1446 CB30                ADDB  #'0'   ; 796
                      FLOW_A_28_OUTPUT_END:
 1448 17FF9A            LBSR PRINT_CHARACTER ;   PRINT_CHARACTER() ; 801
*** warning 1: Long branch within short branch range could be optimized
 144B 3504              PULS B ; 802
 144D 39                RTS ; } ; 803 --SubroutineContextEnds--
                       ; 804
                      PRINT_HEX_WORD: ; PRINT_HEX_WORD() { ; D = value, Y = 
SCREEN ; 805 --SubroutineContextBegins--
 144E 3406              PSHS  D ; 806
 1450 3406              PSHS  D ; 807
 1452 1F89              TFR   A,B ; 808
 1454 54                LSRB ; 809
 1455 54                LSRB ; 810
 1456 54                LSRB ; 811
 1457 54                LSRB ; 812
 1458 17FFDC            LBSR PRINT_HEX_DIGIT ;   PRINT_HEX_DIGIT() ; 813
*** warning 1: Long branch within short branch range could be optimized
 145B 1F89              TFR   A,B ; 814
 145D C40F              ANDB  #$0F ; 815
 145F 17FFD5            LBSR PRINT_HEX_DIGIT ;   PRINT_HEX_DIGIT() ; 816
*** warning 1: Long branch within short branch range could be optimized
 1462 3506              PULS  D ; 817
 1464 1F98              TFR  B,A   ; 818
 1466 54                LSRB ; 819
 1467 54                LSRB ; 820
 1468 54                LSRB ; 821
 1469 54                LSRB ; 822
 146A 17FFCA            LBSR PRINT_HEX_DIGIT ;   PRINT_HEX_DIGIT() ; 823
*** warning 1: Long branch within short branch range could be optimized
 146D 1F89              TFR   A,B ; 824
 146F C40F              ANDB  #$0F ; 825
 1471 17FFC3            LBSR PRINT_HEX_DIGIT ;   PRINT_HEX_DIGIT() ; 826
*** warning 1: Long branch within short branch range could be optimized
 1474 3506              PULS D ; 827
 1476 39                RTS ; } ; 828 --SubroutineContextEnds--
                       ; 829
                      SCROLL: ; SCROLL() { ; 830 --SubroutineContextBegins--
 1477 3406              PSHS D ; 831
 1479 3410              PSHS X ; 832
 147B 8E0400            LDX #$400
                      ; CLEAN-RedundantLabel-    FLOW_A_29_OUTPUT_TRUE:
                      FLOW_A_29_OUTPUT_TRUE:
 147E A68820            LDA 32,X
 1481 A780              STA ,x+
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_29_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_29_1_INPUT:
                      ; polarity 0
 1483 8C05E0            CMPX  #$600-32
 1486 1026FFF4          LBNE FLOW_A_29_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_29_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_29_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_29_OUTPUT_END:
 148A 8660              LDA #96
                      ; CLEAN-RedundantLabel-    FLOW_A_30_OUTPUT_TRUE:
                      FLOW_A_30_OUTPUT_TRUE:
 148C A780              STA ,x+
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_30_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_30_1_INPUT:
                      ; polarity 0
 148E 8C0600            CMPX  #$600
 1491 1026FFF7          LBNE FLOW_A_30_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_30_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_30_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_30_OUTPUT_END:
 1495 3510              PULS x ; 842
 1497 3506              PULS D ; 843
 1499 39                RTS ; } ; 844 --SubroutineContextEnds--
                       ; 845
                      INPUT_STRING: ; INPUT_STRING() { ; X=Buffer, U=MaxSize ; 
846 --SubroutineContextBegins--
                       ; 847
 149A 3410               PSHS  X ; 848
 149C 3440               PSHS  U ; 849
 149E 3420               PSHS  Y ; 850
 14A0 3406               PSHS  D ; 851
                       ; 852
 14A2 17FF21            LBSR GET_SCREEN_CURSOR ;    GET_SCREEN_CURSOR() ; 853
                       ; 854
 14A5 3410               PSHS X ; 855
 14A7 335F               LEAU -1,U ; 856
 14A9 3440               PSHS U ; 857
 14AB 1F10               TFR  X,D ; 858
 14AD E3E4               ADDD ,S ; 859
 14AF EDE4               STD  ,S ; 860
                          ; 861
 14B1 CE1514            LDU #ASCIITRANS
                       ; 863
                      FLOW_A_31_OUTPUT_BEGIN:
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_31_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_31_1_INPUT:
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_31_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_31_OUTPUT_TRUE:
                       ; 865
 14B4 8680              LDA #128
 14B6 A7A4              STA ,Y
 14B8 AD9FA000             JSR [$A000] ; 868
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_32_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_32_1_INPUT:
                      ; polarity 1
 14BC 10260003          LBNE FLOW_A_32_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_32_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_32_OUTPUT_TRUE:
 14C0 16FFF1              LBRA  FLOW_A_31_OUTPUT_BEGIN ; continue
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_32_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_32_OUTPUT_END:
                      FLOW_A_32_OUTPUT_END:
                       ; 872
                           ; Process ENTER ; 873
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_33_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_33_1_INPUT:
                      ; polarity 1
 14C3 810D              CMPA  #13
 14C5 10260014          LBNE FLOW_A_33_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_33_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_33_OUTPUT_TRUE:
 14C9 8600              LDA #0
 14CB A784              STA ,X
 14CD 17FEF1            LBSR SET_SCREEN_CURSOR ;        SET_SCREEN_CURSOR() ; 
877
 14D0 3510                   PULS X ; 878
 14D2 3510                   PULS X ; 879
                       ; 880
 14D4 3506                   PULS D ; 881
 14D6 3520                   PULS Y ; 882
 14D8 3540                   PULS U ; 883
 14DA 3510                   PULS X ; 884
 14DC 39                RTS ;        return ; 885
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_33_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_33_OUTPUT_END:
                      FLOW_A_33_OUTPUT_END:
                       ; 887
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_34_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_34_1_INPUT:
                      ; polarity 1
 14DD 8108              CMPA  #8
 14DF 10260011          LBNE FLOW_A_34_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_34_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_34_OUTPUT_TRUE:
                             ; Make there is something to erase ; 889
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_35_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_35_1_INPUT:
                      ; polarity 1
 14E3 AC62              CMPX  2,S
 14E5 102F0008          LBLE FLOW_A_35_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_35_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_35_OUTPUT_TRUE:
 14E9 301F              LEAX -1,X
 14EB 8660              LDA #96
 14ED A7A4              STA ,Y
 14EF 313F              LEAY -1,Y
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_35_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_35_OUTPUT_END:
                      FLOW_A_35_OUTPUT_END:
 14F1 16FFC0              LBRA  FLOW_A_31_OUTPUT_BEGIN ; continue
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_34_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_34_OUTPUT_END:
                      FLOW_A_34_OUTPUT_END:
                       ; 898
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_36_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_36_1_INPUT:
                      ; polarity 1
 14F4 ACE4              CMPX  ,S
 14F6 10260003          LBNE FLOW_A_36_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_36_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_36_OUTPUT_TRUE:
                             ; No more room in buffer ; 900
 14FA 16FFB7              LBRA  FLOW_A_31_OUTPUT_BEGIN ; continue
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_36_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_36_OUTPUT_END:
                      FLOW_A_36_OUTPUT_END:
                       ; 903
                           ; Store key in buffer ; 904
 14FD A780              STA ,X+
                       ; 906
                           ; Echo key to screen         ; 907
 14FF A6C6              LDA A,U
 1501 A7A0              STA ,Y+
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_37_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_37_1_INPUT:
                      ; polarity 1
 1503 108C0600          CMPY  #$600
 1507 10260006          LBNE FLOW_A_37_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_37_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_37_OUTPUT_TRUE:
 150B 17FF69            LBSR SCROLL ;        SCROLL()          ; 911
 150E 31A8E0                 LEAY -32,Y ; 912
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_37_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_37_OUTPUT_END:
                      FLOW_A_37_OUTPUT_END:
                       ; 914
 1511 16FFA0              LBRA  FLOW_A_31_OUTPUT_BEGIN
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-RedundantLabel-    FLOW_A_31_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_31_OUTPUT_END:
                       ; 916
                      ; CLEAN-OrphanReturn-      RTS ; } ; 917 
--SubroutineContextEnds--
                       ; 918
                      ASCIITRANS: ; 919
 1514 20202020202020          fcb     32,32,32,32,32,32,32,32,32,32,32,32,32,32,
32,32 ; 920
 151B 20202020202020
 1522 2020
 1524 20202020202020          fcb       32,32,32,32,32,32,32,32,32,32,32,32,32,3
2,32,32 ; 921
 152B 20202020202020
 1532 2020
 1534 60616263646566          fcb     96,97,98,99,100,101,102,103,104,105,106,10
7,108,109,110,111 ; 922
 153B 6768696A6B6C6D
 1542 6E6F
 1544 70717273747576          fcb       112,113,114,115,116,117,118,119,120,121,
122,123,124,125,126,127 ; 923
 154B 7778797A7B7C7D
 1552 7E7F
 1554 40414243444546          fcb     64,65,66,67,68,69,70,71,72,73,74,75,76,77,
78,79 ; 924
 155B 4748494A4B4C4D
 1562 4E4F
 1564 50515253545556          fcb       80,81,82,83,84,85,86,87,88,89,90,91,92,9
3,94,95 ; 925
 156B 5758595A5B5C5D
 1572 5E5F
 1574 00010203040506          fcb     0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ; 
926
 157B 0708090A0B0C0D
 1582 0E0F
 1584 10111213141516          fcb       16,17,18,19,20,21,22,23,24,25,26,27,28,2
9,30,31  ; 927
 158B 1718191A1B1C1D
 1592 1E1F
                       ; 928
                      ;</EditorTab> ; 929
                       ; 930
                       ; 931
                      ;<EditorTab name="String Functions"> ; 932
                       ; 933
                      ; STRING FUNCTIONS ; 934
                      STRCPY: ; STRCPY() { ; X=source, Y=destination ; 935 
--SubroutineContextBegins--
 1594 3402              PSHS A   ; TOPHER REGSAVE(A,X,Y) ; 936
 1596 3410              PSHS X ; 937
 1598 3420              PSHS Y ; 938
                      ; CLEAN-RedundantLabel-    FLOW_A_38_OUTPUT_TRUE:
                      FLOW_A_38_OUTPUT_TRUE:
 159A A680              LDA ,X+
 159C A7A0              STA ,Y+
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_38_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_38_1_INPUT:
                      ; polarity 0
 159E 8100              CMPA  #0
 15A0 1026FFF6          LBNE FLOW_A_38_OUTPUT_TRUE
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_38_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_38_OUTPUT_END:
                      ; CLEAN-UnreferencedLabel- FLOW_A_38_OUTPUT_END:
 15A4 3520              PULS Y  ; REGRESTORE() ; 943
 15A6 3510              PULS X ; 944
 15A8 3502              PULS A ; 945
 15AA 39                RTS ; } ; 946 --SubroutineContextEnds--
                       ; 947
                      STRLEN: ; STRLEN() { ; X=source, D<=length ; 948 
--SubroutineContextBegins--
 15AB 3410              PSHS X ; 949
 15AD 3420              PSHS Y ; 950
 15AF 108E0000          LDY #0
                      FLOW_A_39_OUTPUT_BEGIN:
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_39_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_39_1_INPUT:
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_39_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_39_OUTPUT_TRUE:
 15B3 A680              LDA ,X+
                      ; polarity 0
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_40_1_INPUT
                      ; CLEAN-UnreferencedLabel- FLOW_A_40_1_INPUT:
                      ; polarity 1
 15B5 8100              CMPA  #0
 15B7 10260003          LBNE FLOW_A_40_OUTPUT_END
                      ; CLEAN-JumpToNextLine-     LBRA FLOW_A_40_OUTPUT_TRUE
                      ; CLEAN-UnreferencedLabel- FLOW_A_40_OUTPUT_TRUE:
 15BB 160005              LBRA  FLOW_A_39_OUTPUT_END ; break
                      ; CLEAN-JumpToNextLine-        LBRA  FLOW_A_40_OUTPUT_END
                      ; CLEAN-RedundantLabel-    FLOW_A_40_OUTPUT_END:
                      FLOW_A_40_OUTPUT_END:
 15BE 3121              LEAY 1,Y
 15C0 16FFF0              LBRA  FLOW_A_39_OUTPUT_BEGIN
*** warning 1: Long branch within short branch range could be optimized
                      ; CLEAN-RedundantLabel-    FLOW_A_39_OUTPUT_END:
                      FLOW_A_39_OUTPUT_END:
 15C3 1F20              TFR Y,D ; 959
 15C5 3520              PULS Y ; 960
 15C7 3510              PULS X ; 961
 15C9 39                RTS ; } ; 962 --SubroutineContextEnds--
                       ; 963
                      ;</EditorTab> ; 964
                       ; 965
                      ;<EditorTab name="Messages"> ; 966
                      MSG_STUMP:         ; 967
                               ; NTCA("YOU STUMPED ME! LET'S ADD YOUR\nANIMAL 
TO THE ZOO. WHAT WERE\nYOU THINKING OF?\n") ; 968
 15CA 594F5520535455    fcc  "YOU STUMPED ME! LET'S ADD YOUR"
 15D1 4D504544204D45
 15D8 21204C45542753
 15DF 2041444420594F
 15E6 5552
 15E8 0D                fcb  13
 15E9 414E494D414C20    fcc  "ANIMAL TO THE ZOO. WHAT WERE"
 15F0 544F2054484520
 15F7 5A4F4F2E205748
 15FE 41542057455245
 1605 0D                fcb  13
 1606 594F5520544849    fcc  "YOU THINKING OF?"
 160D 4E4B494E47204F
 1614 463F
 1616 0D                fcb  13
                       ; 969
 1617 00                fcb  0
                      MSG_YN: ; 970
                               ; NTCA("YES OR NO (Y/N): " ; 971
 1618 594553204F5220    fcc  "YES OR NO (Y/N): "
 161F 4E4F2028592F4E
 1626 293A20
 1629 00                fcb  0
                       ; 972
                      MSG_QUESTION_MARK: ; 973
                               ; NTCA("?\n") ; 974
 162A 3F                fcc  "?"
 162B 0D                fcb  13
                       ; 975
 162C 00                fcb  0
                      MSG_ISIT: ; 976
                               ; NTCA("IS IT A ") ; 977
 162D 49532049542041    fcc  "IS IT A "
 1634 20
 1635 00                fcb  0
                       ; 978
                      MSG_I_GOT_IT: ; 979
                               ; NTCA("\nI GOT IT!\n\n") ; 980
 1636 0D                fcb  13
 1637 4920474F542049    fcc  "I GOT IT!"
 163E 5421
 1640 0D                fcb  13
 1641 0D                fcb  13
                       ; 981
 1642 00                fcb  0
                      MSG_WELCOME:  ; 982
                               ; NTCA("WELCOME TO THE COCO ZOO!\n\n") ; 983
 1643 57454C434F4D45    fcc  "WELCOME TO THE COCO ZOO!"
 164A 20544F20544845
 1651 20434F434F205A
 1658 4F4F21
 165B 0D                fcb  13
 165C 0D                fcb  13
                       ; 984
 165D 00                fcb  0
                      MSG_INSTRUCTIONS: ; 985
                               ; NTCA("THINK OF AN ANIMAL AND I WILL\nTRY TO 
GUESS IT.\n\n") ; 986
 165E 5448494E4B204F    fcc  "THINK OF AN ANIMAL AND I WILL"
 1665 4620414E20414E
 166C 494D414C20414E
 1673 4420492057494C
 167A 4C
 167B 0D                fcb  13
 167C 54525920544F20    fcc  "TRY TO GUESS IT."
 1683 47554553532049
 168A 542E
 168C 0D                fcb  13
 168D 0D                fcb  13
                       ; 987
 168E 00                fcb  0
                      MSG_GIVE: ; 988
                               ; NTCA("ENTER A QUESTION THAT SEPARATES\nMY 
GUESS FROM YOUR ANIMAL\n") ; 989
 168F 454E5445522041    fcc  "ENTER A QUESTION THAT SEPARATES"
 1696 20515545535449
 169D 4F4E2054484154
 16A4 20534550415241
 16AB 544553
 16AE 0D                fcb  13
 16AF 4D592047554553    fcc  "MY GUESS FROM YOUR ANIMAL"
 16B6 532046524F4D20
 16BD 594F555220414E
 16C4 494D414C
 16C8 0D                fcb  13
                       ; 990
 16C9 00                fcb  0
                      MSG_FROM: ; 991
                               ; NTCA(" FROM ") ; 992
 16CA 2046524F4D20      fcc  " FROM "
 16D0 00                fcb  0
                       ; 993
                      MSG_WHAT: ; 994
                               ; NTCA("WHAT WOULD THE ANSWER BE FOR\nYOUR 
ANIMAL (Y/N)? ") ; 995
 16D1 5748415420574F    fcc  "WHAT WOULD THE ANSWER BE FOR"
 16D8 554C4420544845
 16DF 20414E53574552
 16E6 20424520464F52
 16ED 0D                fcb  13
 16EE 594F555220414E    fcc  "YOUR ANIMAL (Y/N)? "
 16F5 494D414C202859
 16FC 2F4E293F20
 1701 00                fcb  0
                       ; 996
                      MSG_OUT_OF_SPACE: ; 997
                               ; NTCA("SORRY! NO MORE ROOM IN THE\nZOO FOR 
YOUR ANIMAL!\n") ; 998
 1702 534F5252592120    fcc  "SORRY! NO MORE ROOM IN THE"
 1709 4E4F204D4F5245
 1710 20524F4F4D2049
 1717 4E20544845
 171C 0D                fcb  13
 171D 5A4F4F20464F52    fcc  "ZOO FOR YOUR ANIMAL!"
 1724 20594F55522041
 172B 4E494D414C21
 1731 0D                fcb  13
                      ;</EditorTab> ; 999
 1732 00                fcb  0
                       ; 1000
                      ;<EditorTab name="Initial Zoo"> ; 1001
                      ;=========================================================
============== ; 1002
                      ; INITIAL ZOO ; 1003
                      ;=========================================================
============== ; 1004
                       ; 1005
                      RAM_DRIVE_ROM: ; 1006
 1733 434F434F205A4F      fcc   'COCO ZOO'  ; Preamble for disk-file ; 1007
 173A 4F
                      ZOO_NODE_1: ; 1008
 173B 0021                fcw   ZOO_NODE_2-RAM_DRIVE_ROM ; 1009
 173D 0029                fcw   ZOO_NODE_3-RAM_DRIVE_ROM ; 1010
                           ; NTCA("DOES IT LIVE ON LAND") ; 1011
 173F 444F4553204954    fcc  "DOES IT LIVE ON LAND"
 1746 204C495645204F
 174D 4E204C414E44
 1753 00                fcb  0
                      ZOO_NODE_2: ; 1012
 1754 0000                fcw   0 ; 1013
 1756 0000                fcw   0 ; 1014
                           ; NTCA("COW") ; 1015
 1758 434F57            fcc  "COW"
 175B 00                fcb  0
                      ZOO_NODE_3: ; 1016
 175C 0000                fcw   0 ; 1017
 175E 0000                fcw   0 ; 1018
                           ; NTCA("SHARK")    ; 1019
 1760 534841524B        fcc  "SHARK"
 1765 00                fcb  0
                      ZOO_END:           ; 1020
                      ;</EditorTab> ; 1021
                       ; 1022
                                                                            ' 
; 1023
                       ; 1024

27 warning(s) in pass 2.

SYMBOL TABLE
 ADD_TO_ZOO 02 1275 APPEND_NODE 02 130C ASCIITRANS 02 1514 CFLASH_FLUSH 02 
104A
 CFLASH_GET_SIZE 02 104C CFLASH_READ_BYTES 02 1048 CFLASH_SEEK 02 104B 
CFLASH_WRITE_BYTES 02 1049
 CLEAR_SCREEN 02 13AA COPY_CURRENT_TO_LAST 02 1381 FLOW_A_10_OUTPUT_TRUE 02 
1198 FLOW_A_11_OUTPUT_END 02 11E1
 FLOW_A_11_OUTPUT_TRUE 02 11D8 FLOW_A_12_OUTPUT_END 02 11D5 
FLOW_A_13_OUTPUT_END 02 1193 FLOW_A_13_OUTPUT_TRUE 02 118D
 FLOW_A_14_OUTPUT_END 02 118A FLOW_A_15_OUTPUT_END 02 12AC FLOW_A_16_OUTPUT_END 
02 12C6 FLOW_A_17_OUTPUT_END 02 12DE
 FLOW_A_18_OUTPUT_END 02 12F2 FLOW_A_19_OUTPUT_END 02 1341 FLOW_A_19_OUTPUT_TRUE
 02 133F FLOW_A_1_OUTPUT_BEGIN 02 101D
 FLOW_A_20_OUTPUT_TRUE 02 1370 FLOW_A_21_OUTPUT_TRUE 02 1393 
FLOW_A_22_OUTPUT_BEGIN 02 13B2 FLOW_A_22_OUTPUT_END 02 13BE
 FLOW_A_23_OUTPUT_BEGIN 02 13CF FLOW_A_23_OUTPUT_END 02 13E0 
FLOW_A_24_OUTPUT_END 02 13DA FLOW_A_25_OUTPUT_END 02 1412
 FLOW_A_25_OUTPUT_TRUE 02 140F FLOW_A_26_OUTPUT_END 02 1409 
FLOW_A_27_OUTPUT_TRUE 02 1428 FLOW_A_28_OUTPUT_END 02 1448
 FLOW_A_28_OUTPUT_TRUE 02 1446 FLOW_A_29_OUTPUT_TRUE 02 147E 
FLOW_A_2_OUTPUT_TRUE 02 1062 FLOW_A_30_OUTPUT_TRUE 02 148C
 FLOW_A_31_OUTPUT_BEGIN 02 14B4 FLOW_A_32_OUTPUT_END 02 14C3 
FLOW_A_33_OUTPUT_END 02 14DD FLOW_A_34_OUTPUT_END 02 14F4
 FLOW_A_35_OUTPUT_END 02 14F1 FLOW_A_36_OUTPUT_END 02 14FD FLOW_A_37_OUTPUT_END 
02 1511 FLOW_A_38_OUTPUT_TRUE 02 159A
 FLOW_A_39_OUTPUT_BEGIN 02 15B3 FLOW_A_39_OUTPUT_END 02 15C3 
FLOW_A_3_OUTPUT_END 02 10B5 FLOW_A_40_OUTPUT_END 02 15BE
 FLOW_A_4_OUTPUT_TRUE 02 10C0 FLOW_A_5_OUTPUT_END 02 110A FLOW_A_5_OUTPUT_TRUE 
02 10F1 FLOW_A_6_OUTPUT_END 02 10FE
 FLOW_A_7_OUTPUT_END 02 111B FLOW_A_8_OUTPUT_END 02 112D FLOW_A_9_OUTPUT_BEGIN 
02 1143 GET_SCREEN_CURSOR 02 13C6
 INIT_CFLASH_FILE 02 1026 INIT_RAM_FILE 02 1050 INPUT_BUFFER 02 262D 
INPUT_STRING 02 149A
 LINE_FEED 02 1419 LOAD_ZOO_NODE 02 1353  MSG_FROM 02 16CA  MSG_GIVE 02 168F
 MSG_INSTRUCTIONS 02 165E  MSG_ISIT 02 162D MSG_I_GOT_IT 02 1636 
MSG_OUT_OF_SPACE 02 1702
 MSG_QUESTION_MARK 02 162A MSG_STUMP 02 15CA MSG_WELCOME 02 1643  MSG_WHAT 02 
16D1
    MSG_YN 02 1618 NODE_BUF_CURRENT 02 2106 NODE_BUF_LAST 02 2000 
NODE_BUF_NEW_1 02 220C
 NODE_BUF_NEW_2 02 2312 OUT_OF_DISK_SPACE 02 1348  PLAY_ZOO 02 1135 
PRINT_CHARACTER 02 13E5
 PRINT_HEX_DIGIT 02 1437 PRINT_HEX_WORD 02 144E PRINT_MESSAGE 02 13CB 
RAM_DRIVE 02 3000
 RAM_DRIVE_ROM 02 1733 RAM_FLUSH 02 1122 RAM_GET_SIZE 02 1131 RAM_READ_BYTES 
02 109C
  RAM_SEEK 02 1123 RAM_WRITE_BYTES 02 10DD SCREEN_CURSOR 02 263D    SCROLL 02 
1477
 SET_SCREEN_CURSOR 02 13C1    STRCPY 02 1594    STRLEN 02 15AB    TEMP_A 02 
263F
   ZOO_END 02 1766 ZOO_GATHER_INFO 02 11E6    ZOO_IO 02 2418 ZOO_NODE_1 02 
173B
 ZOO_NODE_2 02 1754 ZOO_NODE_3 02 175C
106 SYMBOLS

0 error(s), 54 warning(s)
